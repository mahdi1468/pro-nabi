// animation.cpp
// Created By: IT2.IR

#include<stdio.h>
#include <stdlib.h>

#include <iostream>
#include <windows.h>
#include <conio.h>
#include <time.h>
using namespace std;
 int xmashin=38,ymashin=20,speed=1,counter=300;
void wait ( double seconds )
{
  clock_t endwait;
  endwait = clock () + seconds * CLOCKS_PER_SEC ;
  while (clock() < endwait) {}
}

void SetColor(int ForgC)
{
     WORD wColor;
     HANDLE hStdOut = GetStdHandle(STD_OUTPUT_HANDLE);
     CONSOLE_SCREEN_BUFFER_INFO csbi;
     if(GetConsoleScreenBufferInfo(hStdOut, &csbi))
     {
          wColor = (csbi.wAttributes & 0xF0) + (ForgC & 0x0F);
          SetConsoleTextAttribute(hStdOut, wColor);return;
     }

}
void gotoxy(int x, int y){

  COORD coord;
  coord.X = x;
  coord.Y = y;
  SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), coord);
}
void mashin(int x,int y)
{
   SetColor(12);//hashiye ha
    gotoxy(x,y);
    printf(" ____");
    gotoxy(x,y+1);
    printf("/____\\");
    gotoxy(x,y+2);
    printf("[_()_]");
    gotoxy(x,y+3);
    printf("| ^^ |");
if(speed==4)
{

     gotoxy(x,y+3);
    printf("|    |");
    SetColor(14);
     gotoxy(x+2,y+3);
    printf(";;");
    gotoxy(70,11);
    printf("NITRO   4X SPEED");
}

}
void lose();


void m1(int x,int y)
{
   SetColor(13);//hashiye ha
    gotoxy(x,y);
    printf(" __");gotoxy(x,y+1);
    printf("(  )");gotoxy(x,y+2);
    printf("[()]");gotoxy(x,y+3);
    printf("^^^^");
    if(y>16&&y<=23)
       if((x-xmashin>0)&&(x-xmashin<5)||(xmashin-x<5)&&(xmashin-x>0))
        {lose();
        }
}
void m2(int x,int y)
{
   SetColor(14);//hashiye ha
    gotoxy(x,y);
    printf(" __");gotoxy(x,y+1);
    printf("(  )");gotoxy(x,y+2);
    printf("[()]");gotoxy(x,y+3);
    printf("^^^^");
if(y>16&&y<=23)
       if((x-xmashin>0)&&(x-xmashin<5)||(xmashin-x<5)&&(xmashin-x>0))
        {lose();
        }
}
void m3(int x,int y)
{
   SetColor(15);//hashiye ha
    gotoxy(x,y);
    printf(" __");gotoxy(x,y+1);
    printf("(  )");gotoxy(x,y+2);
    printf("[()]");gotoxy(x,y+3);
    printf("^^^^");
    if(y>16&&y<=23)
       if((x-xmashin>0)&&(x-xmashin<5)||(xmashin-x<5)&&(xmashin-x>0))
        {lose();
        }

}
void m4(int x,int y)
{
   SetColor(10);//hashiye ha
    gotoxy(x,y);
    printf(" __");gotoxy(x,y+1);
    printf("(  )");gotoxy(x,y+2);
    printf("[()]");gotoxy(x,y+3);
    printf("^^^^");
    if(y>16&&y<=23)
       if((x-xmashin>0)&&(x-xmashin<5)||(xmashin-x<5)&&(xmashin-x>0))
        {lose();
        }

}
void m5(int x,int y)
{
   SetColor(11);//hashiye ha
    gotoxy(x,y);
    printf(" __");gotoxy(x,y+1);
    printf("(  )");gotoxy(x,y+2);
    printf("[()]");gotoxy(x,y+3);
    printf("^^^^");
    if(y>16&&y<=23)
       if((x-xmashin>0)&&(x-xmashin<5)||(xmashin-x<5)&&(xmashin-x>0))
        {lose();
        }

}
void m6(int x,int y)
{
   SetColor(12);//hashiye ha
    gotoxy(x,y);
    printf(" __");gotoxy(x,y+1);
    printf("(  )");gotoxy(x,y+2);
    printf("[()]");gotoxy(x,y+3);
    printf("^^^^");
    if(y>16&&y<=23)
       if((x-xmashin>0)&&(x-xmashin<5)||(xmashin-x<5)&&(xmashin-x>0))
        {lose();
        }

}

void kamion1(int x,int y)
{
   SetColor(13);//hashiye ha
    gotoxy(x,y);
    printf("   ___");gotoxy(x,y+1);
    printf("  / - \\");gotoxy(x,y+2);
    printf(" /_____\\");gotoxy(x,y+3);
    printf("___| |___");gotoxy(x,y+4);
    printf("|        |");gotoxy(x,y+5);
    printf("| M T N  |");gotoxy(x,y+6);
    printf("|        |");gotoxy(x,y+7);
    printf("|________|");
    if(y>12&&y<=23)
       if((x-xmashin>0)&&(x-xmashin<6)||(xmashin-x<8)&&(xmashin-x>0))
        {lose();
        }

}
void kamion2(int x,int y)
{
   SetColor(13);//hashiye ha
    gotoxy(x,y);
    printf("   ___");gotoxy(x,y+1);
    printf("  / - \\");gotoxy(x,y+2);
    printf(" /_____\\");gotoxy(x,y+3);
    printf(" __| |__");gotoxy(x,y+4);
    printf("|       |");gotoxy(x,y+5);
    printf("|   0   |");gotoxy(x,y+6);
    printf("|       |");gotoxy(x,y+7);
    printf("|   O   |");gotoxy(x,y+8);
    printf("|       |");gotoxy(x,y+9);
    printf("|   O   |");gotoxy(x,y+10);
    printf("|       |");gotoxy(x,y+11);
    printf("|   IR  |");gotoxy(x,y+12);
    printf("|_______|");
    if(y>7&&y<=23)
       if((x-xmashin>0)&&(x-xmashin<6)||(xmashin-x<8)&&(xmashin-x>0))
        {lose();
        }

}
void motor1(int x,int y)
{
   SetColor(14);//hashiye ha
    gotoxy(x,y);
    printf(" ()");gotoxy(x,y+1);
    printf(" [X] ");gotoxy(x,y+2);
    printf(" ()");gotoxy(x,y+3);

    if(y>17&&y<=23)
       if((x-xmashin>0)&&(x-xmashin<3)||(xmashin-x<3)&&(xmashin-x>0))
        {lose();
        }

}

void motor2(int x,int y)
{
   SetColor(12);//hashiye ha
    gotoxy(x,y);
    printf(" ()");gotoxy(x,y+1);
    printf(" [X] ");gotoxy(x,y+2);
    printf(" ()");gotoxy(x,y+3);

    if(y>17&&y<=23)
       if((x-xmashin>0)&&(x-xmashin<3)||(xmashin-x<3)&&(xmashin-x>0))
        {lose();
        }

}

void hashiye()
{



    //loop thru top to bottom direction
    SetColor(6);//hashiye ha
    for(int a =1; a<20; a++){
        gotoxy(49,a);
        cout << "||";
    }

    //loop thru bottom to top direction
        SetColor(6);
      for(int a = 19; a>0; a--){

        gotoxy(0,a);
        cout << "||";
    }


}

void puse()
{
    gotoxy(70,20);
    SetColor(13);
    printf("GAME PUSE");
    gotoxy(70,21);
    printf("for continue press <s>");
    wait(2);
    while(getch()!='s');
}

void show()
{

    mashin(38,20);
    int sakhti=0;
    int ym1=0,ym2=0,ym5=0,ym3=0,ym4=0,ym6=0,ymotor1=0,ymotor2=0,ykamion1=0,ykamion2=0;
    srand(time(NULL));
    int r=0;


    while(1)
    {
        counter++;
        mashin(xmashin,ymashin);
        hashiye();


        if(counter>1920)
        {
            if(counter %320==0)//male randome
          {
              r = rand() % 6 + 1;

              ym1=ym2=ym3=ym4=ym5=ym6=ymotor1=ymotor2=ykamion1=ykamion2=0;
          }
        }
        else
        {
            if(counter %320==0)//male randome
          {
              r++;

              ym1=ym2=ym3=ym4=ym5=ym6=ymotor1=ymotor2=ykamion1=ykamion2=0;
          }

        }


//mavane
if(r==1)//noe 1
{
    if(ym1<24)
    m1(5,ym1);

    if(counter %7==0)
        ym1+=speed;
         if(ymotor1<24)
    motor1(35,ymotor1);

    if(counter %10==0)
        ymotor1+=speed;


         if(ykamion1<20)
    {
        kamion1(20,ykamion1);

        if(counter %6==0)
            ykamion1+=speed;
    }


}

if(r==2)
{
    if(ym2<25)
    {
        m2(35,ym2);

        if(counter %12==0)
            ym2+=speed;
    }



    if(ym3<25)
    {
        m3(25,ym3+2);

        if(counter %15==0)
            ym3+=speed;

    }


        if(ym4<25)
        {
            m4(20,ym4+1);

        if(counter %8==0)
            ym4+=speed;
        }



}
if(r==3)
{
    if(ym5<25)
    {
        m5(2,ym5);

        if(counter %10==0)
            ym5+=1;
    }



    if(ym4<25)
    {
        m4(21,ym4+2);

        if(counter %9==0)
            ym4+=1;

    }


        if(ym1<25)
        {
            m1(32,ym1+1);

        if(counter %16==0)
            ym1+=speed;
        }


   if(ym2<25)
        {
            m2(25,ym2+1);

        if(counter %6==0)
            ym2+=speed;
        }

   if(ym6<25)
        {
            m6(40,ym6+1);

        if(counter %12==0)
            ym6+=speed;
        }

}
if(r==4)
{
    if(ym2<25)
    {
        m2(40,ym2);

        if(counter %15==0)
            ym2+=speed;
    }



    if(ym4<25)
    {
        m4(4,ym4+2);

        if(counter %6==0)
            ym4+=speed;

    }


        if(ym1<25)
        {
            m1(12,ym1+1);

        if(counter %10==0)
            ym1+=speed;
        }


   if(ym3<25)
        {
            m3(25,ym3+1);

        if(counter %12==0)
            ym3+=speed;
        }

   if(ym4<25)
        {
            m4(30,ym4+1);

        if(counter %8==0)
            ym4+=speed;
        }
           if(ym6<25)
        {
            m6(35,ym6+1);

        if(counter %7==0)
            ym6+=speed;
        }


}
if(r==5)
{
    if(ym6<25)
    {
        m6(4,ym6);

        if(counter %8==0)
            ym6+=speed;
    }



    if(ym2<25)
    {
        m2(12,ym2+2);

        if(counter %6==0)
            ym2+=speed;

    }


        if(ym1<25)
        {
            m1(21,ym1+1);

        if(counter %12==0)
            ym1+=speed;
        }


        if(ym3<25)
        {
            m3(27,ym3+1);

        if(counter %6==0)
            ym3+=speed;
        }

   if(ym4<25)
        {
            m4(33,ym4+1);

        if(counter %11==0)
            ym4+=speed;
        }
           if(ym5<25)
        {
            m5(40,ym5+1);

        if(counter %11==0)
            ym5+=speed;
        }


}

if(r==6)
{
    if(ykamion2<18)
    {
        kamion2(15,ykamion2);

        if(counter %8==0)
            ykamion2+=speed;
    }



    if(ymotor2<25)
    {
        motor2(5,ymotor2+2);

        if(counter %10==0)
            ymotor2+=speed;

    }


        if(ym1<25)
        {
            m1(24,ym1+1);

        if(counter %8==0)
            ym1+=speed;
        }


        if(ym5<25)
        {
            m5(30,ym5+1);

        if(counter %6==0)
            ym5+=speed;
        }

   if(ym2<25)
        {
            m2(34,ym2+1);

        if(counter %11==0)
            ym2+=speed;
        }
           if(ym6<25)
        {
            m6(40,ym6+1);

        if(counter %11==0)
            ym6+=speed;
        }


}






        int keyPress;
        if(kbhit())
        {
      keyPress = getch();
         if (keyPress == 's'||keyPress == 'S')
         {
             puse();
             printf("game start for a sec next");
             wait(1);
             keyPress ='\0';
         }
      if (keyPress == 75&&xmashin>4)
         xmashin-=4;
      else if (keyPress == 77&&xmashin<42)
         xmashin+=4;
        if(keyPress == 72)
        {
           speed=4;
        }
        else
            speed =1;
        }
      /*  if(getch()=='a')
        {
            xmashin--;
        }

        if(getch()=='d')
        {
            xmashin++;
        }
      */
    SetColor(14);

      gotoxy(60,20);
      printf("emtiyaz :%d  ",counter);

            wait(.01);
        system("cls");

    }

}



int main() {
system("cls");
SetColor(10);
printf("HI WELCOME TO CAR GAME\nfor control car use left or right arrow key\nand for speed up use up arrow key\nand for puse game press <s>\nare u ready? so press <s> to start game\nhave fun:)))");
while(getch()!='s');
    system("cls"); //clear the screen

    show();



return 0;
}
void lose()
{

    gotoxy(70,20);
    SetColor(11);
    printf("YOU LOSE emtiaz: %d\n",counter);
    wait(2);
    gotoxy(70,21);
    printf("for play again press <s> \n");
    while(getch()!='s');
   main();
}
